<html ap:decorate="~{layout/layout-contents}">

<body>
        <!-- #ap_container -->
        <div ap:fragment="layout-contents">
            <!-- page contents -->
            <div class="ap_contents mypage">
               	<div class="panel none_bdr">
               		<div class="my_point_score cushion">
						<dl>
							<dt><span th:text="${session.LOGIN_USER.member.name.name1}">홍길동</span>님의 현재 쿠션 포인트</dt>
							<dd><strong class="num" th:text="${#IntegUtil.toCommaNumber(cushin.totRemainPt)}">340,000</strong> <span class="num">P</span></dd>
						</dl>
						<hr class="div m25">
						<div class="align_center">
							<p class="text">쿠션 제품 구매 시 결제금액의 30%를 적립받고<br>재구매 시 현금처럼 사용하는 할인 포인트 제도입니다.</p>
						</div>
						<a href="/cs/cushionPoint" class="btn_md_bordered w100p">쿠션 포인트 안내</a>
					</div>
               	</div>
				<div class="panel pdb0">
					<div class="my_point_list cushion">
						<div class="ui_multiple_date_picker">
							<div class="date_btn_set">
								<span><input type="radio" class="select_range_date" name="radio4" id="radio4_0" value="all" checked=""><label for="radio4_0">전체</label></span>
								<span><input type="radio" class="select_range_date" name="radio4" id="radio4_1" value="1months" checked=""><label for="radio4_1">1개월</label></span>
								<span><input type="radio" class="select_range_date" name="radio4" id="radio4_2" value="3months"><label for="radio4_2">3개월</label></span>
								<span><input type="radio" class="select_range_date" name="radio4" id="radio4_3" value="6months"><label for="radio4_3">6개월</label></span>
								<span><input type="radio" class="select_range_date" name="radio4" id="radio4_4" value="1years"><label for="radio4_4">1년</label></span>
							</div>
							<br>
							<div class="input_date_group">
								<div style="display:none;">
									<input type="hidden" class="ui_date_picker start_date" placeholder="날짜 선택" title="날짜 선택" value="">
									<input type="hidden" class="ui_date_picker end_date" placeholder="날짜 선택" title="날짜 선택" value="">
								</div>
								<div class="date_info_area">
									<span class="start_date"></span> ~ <span class="end_date"></span> <span class="color_light_gray">까지의 사용 및 적립 내역</span>
								</div>
							</div>
						</div>
						<br class="entry-point">
						<!--/* Start : 목록내용이 있을경우 */-->
						
						
            			<div ap:replace="~{my/fragment/cushion-point-fragment :: cushion-point-list}"></div>
						
						<!--/* end : 목록내용이 있을경우 */-->

						<!--/* 목록내용이 없을경우
						<div class="panel notice">
							<i class="ico"></i>
							<p class="text">선택하신 기간에 해당하는 내역이 없습니다.</p>
						</div>
						*/-->
					</div>

					<div class="ui_accordion space0 brdtop" data-open-type="single">
						<dl>
							<dt class="on">
								<span class="title">쿠션포인트 유의사항</span>
								<button type="button"><span class="sr_only">더보기</span></button>
							</dt>
							<dd>
								<div class="cont gray">
									<ul class="list_bullet_dot">
										<li>포인트 적립 : 쿠션 본품, 리필 결제금액의 30% 적립</li>
										<li>포인트 사용 : 항시 100% 사용, 타 할인 및 쿠폰과 중복 적용 불가</li>
										<li>이용 가능 매장 : 에뛰드하우스 매장 / 온라인쇼핑몰<br>(PC, 모바일)</li>
										<li>이용 방법 : <br>매장 – 주문시 본인 확인 후 사용/적립 가능<br>온라인쇼핑몰 – 주문 결제시 쿠션포인트 사용/적립 가능</li>
										<li>쿠션 포인트 제도는 에뛰드 뷰티포인트 통합회원에게만 서비스 됩니다.<br><a href="#">[뷰티포인트 통합회원안내] </a></li>
										<li>쿠션 포인트는 적립일로 부터 6개월 경과 시 소멸됩니다.<br>(회원 탈퇴 시 소멸)</li>
										<li>쿠션 포인트 사용 시 타 프로모션 및 쿠폰과 중복 사용할 수 없으며 분할 사용하실 수 없습니다. (보유 포인트 전액 사용)</li>
										<li>쿠션 포인트 사용 시 뷰티포인트 적립 및 사용이 불가합니다.  쿠션 포인트는 최대 10만점까지 </li>
									</ul>
								</div>
							</dd>
						</dl>
					</div>
				</div>
            </div>
            <!-- // page contents -->
            
            <!-- 마이페이지 맵 01-24 위치변경 -->
         	<th:block ap:replace="~{my/fragment/mypage-sitemap}"/>
         	<!-- // 마이페이지 맵 -->
         	
        </div>
        <!-- // #ap_container -->

        <!--/* 하단 js등을 실행하는 마지막 영역 */-->
        <th:block ap:fragment="layout-endpoint">

			<!--/* 예시, 적절한 위치에 옮겨 개발하세요 */-->
			<script>
			var progress = '<div id="m-loading"><ul class="loading"><li style="padding: 0px;border: 2px solid #f54a7e;"></li><li style="padding: 0px;border: 2px solid #f54a7e;"></li><li style="padding: 0px;border: 2px solid #f54a7e;"></li></ul></div>';
			var date = null;
			var pageNumber = 1;
				//multiple date picker적용
				$( '.ui_multiple_date_picker' ).multipleDatePicker({
					defaultRangeDate: '1months',
					minDate: moment().subtract( 50, 'years' )
				}).on( 'multiple-date-picker-change', function (e) {
					console.log( e.type, e.date );
					pageNumber = 1;
					$(".entry-point:last").after(progress);
			    	$(".pbody").remove();
					date = e.date;
					$.get("/my/page/cushion/cushionPointFragment?startDt="+date.startDate + "&endDt="+date.endDate, function(data) {
						$("#m-loading").remove();
						$(".entry-point").after(data);
						$('#more em').text($('.cushion-item').size());
					});
				});

				function more() {
					pageNumber++;
					$(".cushion-table:last").after(progress);
					if(date)
						$.get("/my/page/cushion/cushionPointBodyFragment?pageNumber=" + pageNumber + "&startDt="+date.startDate + "&endDt="+date.endDate, function(data) {
							$("#m-loading").remove();
							$(".cushion-table:last").after(data);
							$('#more em').text($('.cushion-item').size());
						});
					else
						$.get("/my/page/info/pearlAppendListTable?pageNumber=" + pageNumber, function(data) {
							$("#m-loading").remove();
							$(".cushion-table:last").after(data);
							$('#more em').text($('.cushion-item').size());
						});
						
				}
			</script>

        </th:block>
</body>
</html>