<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:ap="http://www.ultraq.net.nz/thymeleaf/layout">
<head></head>
<body>

<th:block th:each="pr, stat: *{payParam}">
		<input type="hidden" th:id="${pr.key}" th:value="${pr.value}"/>
	</th:block>		
	<!-- <th:block th:each="prodItem : ${payParam.productItems}">
		<div th:name="prodItem">
			<input type="text" id="categoryType" th:value="${prodItem.categoryType}"/>
			<input type="text" id="categoryId" th:value="${prodItem.categoryId}"/>
			<input type="text" id="payReferer" th:value="${prodItem.payReferer}"/>
			<input type="text" id="count" th:value="${prodItem.count}"/>
			<input type="text" id="uid" th:value="${prodItem.uid}"/>
			<input type="text" id="name" th:value="${prodItem.name}"/>
		</div>
	</th:block> -->

<script src="https://nsp.pay.naver.com/sdk/js/naverpay.min.js"></script>
<script>
	
	var clientId = document.getElementById("clientId").value;
	var mode = document.getElementById("mode").value;
	var merchantPayKey = document.getElementById("merchantPayKey").value;
	var productName = document.getElementById("productName").value;
	var productCount = document.getElementById("productCount").value;
	var totalPayAmount = document.getElementById("totalPayAmount").value;
	var taxScopeAmount = document.getElementById("taxScopeAmount").value;
	var taxExScopeAmount = document.getElementById("taxExScopeAmount").value;
	var returnUrl = document.getElementById("returnUrl").value;
	
	//하기 간편결제의 경우 셋팅 안함.
	/* var productItems = []; */
	
	//TODO : productItem 셋팅시 오류 발생  문서상엔 필수값
    /* const prodElms = document.getElementsByName("prodItem");
    if(prodElms != null) {
    	
    	 for(var i =0; i < prodElms.length; i++) {
    		alert(prodElms[i].querySelector('#categoryType').value);
    		 productItems[i] = {
    				
					categoryType : prodElms[i].querySelector('#categoryType').value,
					categoryId : prodElms[i].querySelector('#categoryId').value,
					payReferer : prodElms[i].querySelector('#payReferer').value,
					uid : prodElms[i].querySelector('#uid').value,
					name : prodElms[i].querySelector('#name').value,
					count : prodElms[i].querySelector('#count').value
					
				};
    	}  
    } */
	
	 var oPay = Naver.Pay.create({
          "mode" : mode, // development or production
          "clientId": clientId // clientId
    });

     oPay.open({
          "merchantPayKey": merchantPayKey,
          "productName": productName,
          "productCount" : productCount,
          "totalPayAmount": totalPayAmount,
          "taxScopeAmount": taxScopeAmount,
          "taxExScopeAmount": taxExScopeAmount,
          "returnUrl": returnUrl
         /*  "productItems" : productItems */
        }); 

</script>
	

</body>
</html>
