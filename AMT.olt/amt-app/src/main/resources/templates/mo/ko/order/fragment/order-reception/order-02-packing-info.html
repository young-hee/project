<!-- 포장 서비스 (회원만 가능한 서비스) -->
<div class="ui_accordion" th:if="${apMember != null}">
	<dl>
		<dt><b class="title">포장서비스 <!-- span>신청안함</span --> <span>2개 신청</span></b> <button type="button"><i class="ico_navi"></i><span class="sr_only">더보기</span></button></dt>
		<dd aria-hidden="true" style="display: none;">

			<div class="ui_tooltip">
				<button type="button" class="btn_tooltip"><b>2</b>개 상품을 무료로 신청할 수 있습니다 <span>자세히</span></button>
				<div class="layer_tooltip">
					<dl>
						<dt>포장 서비스 안내</dt>
						<dd>
							<p class="text">
								고객님의 구매등급에 따라 주문건당 무료포장 서비스를 이용하실 수 있습니다.<br>
								<span th:text="${apMember.name.name1}"></span>님은 <b th:text="${ordEx.memberLevelName} ? ${ordEx.memberLevelName} :'test'"></b> 고객으로, <b>1</b>개 상품 신청할 수 있습니다.<br>
								포장이 어려운 상품은 선택 목록에서 자동 제외됩니다<br>
								포장 서비스 이용 주문이 많을 경우, 배송이 지연될 수 있습니다.
							</p>
							<button type="button" class="ui_close sm"><span class="sr_only">툴팁 닫기</span></button>
						</dd>
					</dl>
				</div>
			</div>
			<div class="product_slide_new gift_wrapping">
				<ul class="three_half check">
					<th:block th:each="ordHistProdEx: ${ordEx.ordHistEx.ordHistProdExList}">
						<th:block th:each="giftPackingEx: ${ordHistProdEx.ordProdEx.possibleGiftPackingExList}">
							<li>
								<div class="check_wrap">
									<span class="chk_round_h24"><input type="checkbox" name="giftPackingCheck" id="product_item1"></span>
									<label for="product_item1">
										<span class="product_visual">
											<th:block th:each="giftImgUrl, iterStat : ${giftPackingEx.giftPackingImgUrlList}">
												<img th:src="${giftImgUrl}" th:if="${iterStat.first}">
											</th:block>
										</span>
										<span class="product_info">
											<span class="brand" th:text="${ordHistProdEx.ordProdEx.onlineProdNameBlang}">헤라</span>
											<span class="product_name" th:text="${ordHistProdEx.ordProdEx.prodNameBlang}">제품명 최대 두줄</span>
										</span>
									</label>
								</div>
							</li>
						</th:block>
					</th:block>
				</ul>
			</div>
		</dd>
	</dl>
</div>
<script>
	var memberLevelName = "";
	var memberLevelRankingSn = 0;
	$(function(){
		$("input[name=giftPackingCheck]").on("click", function(){
			var checkCnt = $("input[name=giftPackingCheck]:checked").length;
			if(memberLevelRankingSn == 1 || memberLevelRankingSn == 2){
				if(checkCnt > 1){
					$(this).prop('checked', false);
					AP.modal.alert("총 1개 선택이 가능합니다.");
				}
			}else if(memberLevelRankingSn == 3 || memberLevelRankingSn == 4){
				if(checkCnt > 2){
					$(this).prop('checked', false);
					AP.modal.alert("총 2개 선택이 가능합니다.");
				}
			}else{
				$(this).prop('checked', false);
				AP.modal.alert("선택할 수 없는 등급입니다.");
			}
		})
	})
</script>